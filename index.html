<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- PDF.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script>
    // âœ… Configure worker (important!)
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";
  </script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-6">
  
  <div class="bg-white p-6 rounded-2xl shadow-lg w-full max-w-3xl">
    <h1 class="text-2xl font-bold mb-4 text-center">PDF Upload & Viewer</h1>

    <!-- File Upload -->
    <input id="file-input" type="file" accept="application/pdf"
      class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 mb-4">

    <!-- PDF Viewer -->
    <div id="pdf-viewer" class="flex flex-col items-center">
      <canvas id="pdf-canvas" class="border shadow-md mb-4"></canvas>
      <div class="flex justify-center gap-4">
        <button id="prev" class="px-4 py-2 bg-blue-500 text-white rounded-lg">Previous</button>
        <span id="page-info" class="text-gray-700"></span>
        <button id="next" class="px-4 py-2 bg-blue-500 text-white rounded-lg">Next</button>
      </div>
    </div>
  </div>

  <script>
    let pdfDoc = null,
        pageNum = 1,
        canvas = document.getElementById("pdf-canvas"),
        ctx = canvas.getContext("2d");

    const fileInput = document.getElementById("file-input");
    const pageInfo = document.getElementById("page-info");

    // Handle File Upload
    fileInput.addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (file && file.type === "application/pdf") {
        const fileReader = new FileReader();
        fileReader.onload = function() {
          const typedarray = new Uint8Array(this.result);
          pdfjsLib.getDocument(typedarray).promise.then(function(pdf) {
            pdfDoc = pdf;
            pageNum = 1;
            renderPage(pageNum);
          });
        };
        fileReader.readAsArrayBuffer(file);
      } else {
        alert("Please upload a valid PDF file.");
      }
    });

    // Render Page
    function renderPage(num) {
      pdfDoc.getPage(num).then(function(page) {
        let viewport = page.getViewport({ scale: 1.5 });
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        let renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };
        page.render(renderContext);

        pageInfo.textContent = `Page ${num} of ${pdfDoc.numPages}`;
      });
    }

    // Next & Prev Buttons
    document.getElementById("prev").addEventListener("click", function() {
      if (pageNum <= 1) return;
      pageNum--;
      renderPage(pageNum);
    });

    document.getElementById("next").addEventListener("click", function() {
      if (pageNum >= pdfDoc.numPages) return;
      pageNum++;
      renderPage(pageNum);
    });
  </script>

</body>
</html>
